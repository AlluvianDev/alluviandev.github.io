<div style="background:#222;color:white;padding:20px;border:2px solid #4caf50;max-width:400px;">
    <h2>Minecraft Server Status</h2>
    <p><strong>MOTD:</strong> <span id="motd">Loading...</span></p>
    <p><strong>Players:</strong> <span id="players">--</span></p>
    <p><strong>Version:</strong> <span id="version">--</span></p>
    <p><strong>Map:</strong> <span id="map">--</span></p>
    <p><strong>Player List:</strong></p>
    <ul id="playerlist"></ul>
</div>

<script>
async function loadStatus() {
    const res = await fetch("/query");
    const data = await res.json();

    if (!data.online) {
        document.getElementById("motd").innerText = "Server offline";
        return;
    }

    document.getElementById("motd").innerText = data.motd;
    document.getElementById("players").innerText =
        `${data.players.online} / ${data.players.max}`;
    document.getElementById("version").innerText = data.version.name;
    document.getElementById("map").innerText = data.map;

    // Player list
    const ul = document.getElementById("playerlist");
    ul.innerHTML = "";
    if (data.players.list) {
        data.players.list.forEach(p => {
            const li = document.createElement("li");
            li.innerText = p;
            ul.appendChild(li);
        });
    }
}

loadStatus();
setInterval(loadStatus, 30000);
</script>
